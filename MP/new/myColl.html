
<html>
	<head>
		<title>我的收藏</title>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=0" name="viewport">
		<meta content="no-cache,must-revalidate" http-equiv="Cache-Control">
		<meta content="telephone=no, address=no" name="format-detection">
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta content="no-cache" http-equiv="pragma">
		<meta content="0" http-equiv="expires">
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
		
		<link rel="stylesheet" type="text/css" href="../css/public.css" > 
		<link rel="stylesheet" type="text/css" href="../css/wen.css" >
		<link rel="stylesheet" type="text/css" href="../css/dropload.min.css">
		<script type="text/javascript" src="../js/jquery-2.0.2.min.js"></script>
		<script type="text/javascript" src="../js/dropload.min.js"></script>
		<script type="text/javascript" src="../js/size.js"></script>

	</head>
	<body>
		<section class='myColl'>
			<div class="line-wrapper">
			  	<div class="line-scroll-wrapper">
				    <div class="line-normal-wrapper">
				      	<div class="line-normal-left-wrapper">
				        	<div class="line-normal-avatar-wrapper"><img src="../img/photoimg2.png" /></div>
				        	<div class="line-normal-info-wrapper">
					          	<div class="line-normal-user-name">产品标题产品标题产品标题产品标题产品标题产品标题</div>
					          	<div class="line-normal-user-rem">某某:瘦瘦高高</div>
					          	<div class='line-normal-user-money'>
					          		<div class='fl'>￥<a>77.99</a></div>
					          		<div class='fr'><a href='../get/prodel.html'>购&nbsp;买</a></div>
					          		<div class='clear'></div>
					          	</div>
				        	</div>
				      	</div>

				    </div>
				    <div class="line-btn-delete"><button>删&nbsp;除</button></div>
				    <div class='clear'></div>
			  	</div>
			</div>
			<div class="line-wrapper">
			  	<div class="line-scroll-wrapper">
				    <div class="line-normal-wrapper">
				      	<div class="line-normal-left-wrapper">
				        	<div class="line-normal-avatar-wrapper"><img src="../img/photoimg2.png" /></div>
				        	<div class="line-normal-info-wrapper">
					          	<div class="line-normal-user-name">产品标题产品标题产品标题产品标题产品标题产品标题</div>
					          	<div class="line-normal-user-rem">某某:瘦瘦高高</div>
					          	<div class='line-normal-user-money'>
					          		<div class='fl'>￥<a>77.99</a></div>
					          		<div class='fr'><a href='../get/prodel.html'>购&nbsp;买</a></div>
					          		<div class='clear'></div>
					          	</div>
				        	</div>
				      	</div>

				    </div>
				     <div class="line-btn-delete"><button>删&nbsp;除</button></div>
				    <div class='clear'></div>
			  	</div>
			</div>
			<div class="line-wrapper">
			  	<div class="line-scroll-wrapper">
				    <div class="line-normal-wrapper">
				      	<div class="line-normal-left-wrapper">
				        	<div class="line-normal-avatar-wrapper"><img src="../img/photoimg2.png" /></div>
				        	<div class="line-normal-info-wrapper">
					          	<div class="line-normal-user-name">产品标题产品标题产品标题产品标题产品标题产品标题</div>
					          	<div class="line-normal-user-rem">某某:瘦瘦高高</div>
					          	<div class='line-normal-user-money'>
					          		<div class='fl'>￥<a>77.99</a></div>
					          		<div class='fr'><a href='../get/prodel.html'>购&nbsp;买</a></div>
					          		<div class='clear'></div>
					          	</div>
				        	</div>
				      	</div>

				    </div>
				     <div class="line-btn-delete"><button>删&nbsp;除</button></div>
				    <div class='clear'></div>
			  	</div>
			</div>
			<div class="line-wrapper">
			  	<div class="line-scroll-wrapper">
				    <div class="line-normal-wrapper">
				      	<div class="line-normal-left-wrapper">
				        	<div class="line-normal-avatar-wrapper"><img src="../img/photoimg2.png" /></div>
				        	<div class="line-normal-info-wrapper">
					          	<div class="line-normal-user-name">产品标题产品标题产品标题产品标题产品标题产品标题</div>
					          	<div class="line-normal-user-rem">某某:瘦瘦高高</div>
					          	<div class='line-normal-user-money'>
					          		<div class='fl'>￥<a>77.99</a></div>
					          		<div class='fr'><a href='../get/prodel.html'>购&nbsp;买</a></div>
					          		<div class='clear'></div>
					          	</div>
				        	</div>
				      	</div>

				    </div>
				     <div class="line-btn-delete"><button>删&nbsp;除</button></div>
				    <div class='clear'></div>
			  	</div>
			</div>
			<div class="line-wrapper">
			  	<div class="line-scroll-wrapper">
				    <div class="line-normal-wrapper">
				      	<div class="line-normal-left-wrapper">
				        	<div class="line-normal-avatar-wrapper"><img src="../img/photoimg2.png" /></div>
				        	<div class="line-normal-info-wrapper">
					          	<div class="line-normal-user-name">产品标题产品标题产品标题产品标题产品标题产品标题</div>
					          	<div class="line-normal-user-rem">某某:瘦瘦高高</div>
					          	<div class='line-normal-user-money'>
					          		<div class='fl'>￥<a>77.99</a></div>
					          		<div class='fr'><a href='../get/prodel.html'>购&nbsp;买</a></div>
					          		<div class='clear'></div>
					          	</div>
				        	</div>
				      	</div>

				    </div>
				     <div class="line-btn-delete"><button>删&nbsp;除</button></div>
				    <div class='clear'></div>
			  	</div>
			</div>
			<div class="line-wrapper">
			  	<div class="line-scroll-wrapper">
				    <div class="line-normal-wrapper">
				      	<div class="line-normal-left-wrapper">
				        	<div class="line-normal-avatar-wrapper"><img src="../img/photoimg2.png" /></div>
				        	<div class="line-normal-info-wrapper">
					          	<div class="line-normal-user-name">产品标题产品标题产品标题产品标题产品标题产品标题</div>
					          	<div class="line-normal-user-rem">某某:瘦瘦高高</div>
					          	<div class='line-normal-user-money'>
					          		<div class='fl'>￥<a>77.99</a></div>
					          		<div class='fr'><a href='../get/prodel.html'>购&nbsp;买</a></div>
					          		<div class='clear'></div>
					          	</div>
				        	</div>
				      	</div>

				    </div>
				     <div class="line-btn-delete"><button>删&nbsp;除</button></div>
				    <div class='clear'></div>
			  	</div>
			</div>
			
		</section>
		<div class='newsbg'>
			<div class='news'>
				<div class='img'><img src='../img/gantan.png'/></div>
				<div class='txt'>您确定要删除宝贝吗</div>
				<div class='fas'>取消</div>
				<div class='ges'>确定</div>
			</div>	
		</div>
	</body>

<script type="text/javascript">
$(document).ready(function(e) {
    // 设定每一行的宽度=屏幕宽度+按钮宽度
    $(".line-scroll-wrapper").width($(".line-wrapper").width() + $(".line-btn-delete").width());
    // 设定常规信息区域宽度=屏幕宽度
    $(".line-normal-wrapper").width($(".line-wrapper").width());
    // 设定文字部分宽度（为了实现文字过长时在末尾显示...）
    $(".line-normal-msg").width($(".line-normal-wrapper").width() - 280);
    
    // 获取所有行，对每一行设置监听
    var lines = $(".line-normal-wrapper");
    var len = lines.length; 
    var lastX, lastXForMobile;

    // 用于记录被按下的对象
    var pressedObj;  // 当前左滑的对象
    var lastLeftObj; // 上一个左滑的对象

    // 用于记录按下的点
    var start;

    // 网页在移动端运行时的监听
    for (var i = 0; i < len; ++i) {
        lines[i].addEventListener('touchstart', function(e){
            lastXForMobile = e.changedTouches[0].pageX;
            pressedObj = this; // 记录被按下的对象 

            // 记录开始按下时的点
            var touches = event.touches[0];
            start = { 
                x: touches.pageX, // 横坐标
                y: touches.pageY  // 纵坐标
            };
        });

        lines[i].addEventListener('touchmove',function(e){
            // 计算划动过程中x和y的变化量
            var touches = event.touches[0];
            delta = {
                x: touches.pageX - start.x,
                y: touches.pageY - start.y
            };

            // 横向位移大于纵向位移，阻止纵向滚动
            if (Math.abs(delta.x) > Math.abs(delta.y)) {
                event.preventDefault();
            }
        });

        lines[i].addEventListener('touchend', function(e){
            var diffX = e.changedTouches[0].pageX - lastXForMobile;
            if (diffX < -70) {
                $(pressedObj).animate({marginLeft:"-50px"}, 50); // 左滑
                lastLeftObj && lastLeftObj != pressedObj && $(lastLeftObj).animate({marginLeft:"0"}, 50); // 已经左滑状态的按钮右滑
                lastLeftObj = pressedObj; // 记录上一个左滑的对象
            } else if (diffX > 70) {
                $(pressedObj).animate({marginLeft:"0"}, 50); // 右滑
                lastLeftObj = null; // 清空上一个左滑的对象
            }
        });

        var nows;
        $(lines[i]).parent().find(".line-btn-delete").click(function(){
        	$(".newsbg").show();
        	$("html,body").css({'overflow':'hidden'});
        	nows = $(this);
        	
        })
        $(".newsbg").find('.fas').click(function(){
        	$(".newsbg").hide();
        	nows.parents(".line-wrapper").animate({marginLeft:"0"}, 50,function(){
        		$("html,body").css({'overflow-x':'hidden',"overflow-y":'auto'});
        	});
       	})
        $(".newsbg").find('.ges').click(function(){
        	$(".newsbg").hide();
        	nows.parents(".line-wrapper").slideUp(100,function(){
        		$("html,body").css({'overflow-x':'hidden',"overflow-y":'auto'});
        	});
        })
        	
        
    }

    
 
    
    $('.myColl').dropload({
        scrollArea : window,
        loadDownFn : function(me){
            $.ajax({
                type: 'GET',
                url: 'json/more.json',
                dataType: 'json',
                success: function(data){
                    var result = '';
                    for(var i = 0; i < data.lists.length; i++){
                        result +=   'hello';
                    }
                    // 为了测试，延迟1秒加载
                    setTimeout(function(){
                        $('#lmess').append(result);
                        me.resetload();
                    },1000);
                },
                error: function(xhr, type){
                    alert('Ajax error!');
                    me.resetload();
                }
            });
        }
    });
});
</script>
</html>