<html>
	<head>
		<title>购物车</title>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=0" name="viewport">
		<meta content="no-cache,must-revalidate" http-equiv="Cache-Control">
		<meta content="telephone=no, address=no" name="format-detection">
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta content="no-cache" http-equiv="pragma">
		<meta content="0" http-equiv="expires">
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
		
		<link rel="stylesheet" type="text/css" href="../css/public.css" > 
		<link rel="stylesheet" type="text/css" href="../css/get.css" >
		<link rel="stylesheet" type="text/css" href="../css/dropload.min.css">
		<script type="text/javascript" src="../js/jquery-2.0.2.min.js"></script>
		<script type="text/javascript" src="../js/dropload.min.js"></script>
		<script type="text/javascript" src="../js/size.js"></script>

	</head>
	<body>
		<section class='shopbuslist'>
			<ul class='list'>
				<li class='line-wrapper'>
					<div class="line-scroll-wrapper">
						<div class='fl line-normal-wrapper' >
							<div class='fl left'>
								<div class='btn'><img src='../img/getFlase.png'/></div>
							</div>
							<div class='fl right'>

								<div class='img fl'><a href='prodel.html'><img src='../img/photoimg2.png'/></a></div>
								<div class='fl con'>
									<a href='prodel.html'>
										<div class='title'>产品标题产品标题产品标题产品标题产品标题产品标题</div>
										<div class='txt'>某某:瘦瘦高高</div>
									</a>
									<div class='f'>
										<div class='money fl'>￥<a>77.99</a></div>
										<div class='count fr'>
											<div class='fl jian'>-</div>
											<div class='fl input'><input type='text' value='2' onkeyup="if(/\D/.test(this.value)){this.value='1';}"/></div>
											<div class='add fl'>+</div>
											<div class='clear'></div>
										</div>
										<div class='clear'></div>
									</div>
								</div>
								<div>
									
								</div>
								<div class='clear'></div>
							</div>
							<div class='clear'></div>
						</div>
						<div class="line-btn-delete"><button>删&nbsp;除</button></div>
						<div class='clear'></div>
					</div>
				</li>
				<li class='line-wrapper'>
					<div class="line-scroll-wrapper">
						<div class='fl line-normal-wrapper' >
							<div class='fl left'>
								<div class='btn'><img src='../img/getFlase.png'/></div>
							</div>
							<div class='fl right'>

								<div class='img fl'><a href='prodel.html'><img src='../img/photoimg2.png'/></a></div>
								<div class='fl con'>
									<a href='prodel.html'>
										<div class='title'>产品标题产品标题产品标题产品标题产品标题产品标题</div>
										<div class='txt'>某某:瘦瘦高高</div>
									</a>
									<div class='f'>
										<div class='money fl'>￥<a>77.99</a></div>
										<div class='count fr'>
											<div class='fl jian'>-</div>
											<div class='fl input'><input type='text' value='2' onkeyup="if(/\D/.test(this.value)){this.value='1';}"/></div>
											<div class='add fl'>+</div>
											<div class='clear'></div>
										</div>
										<div class='clear'></div>
									</div>
								</div>
								<div>
									
								</div>
								<div class='clear'></div>
							</div>
							<div class='clear'></div>
						</div>
						<div class="line-btn-delete"><button>删&nbsp;除</button></div>
						<div class='clear'></div>
					</div>
				</li>
				<li class='line-wrapper'>
					<div class="line-scroll-wrapper">
						<div class='fl line-normal-wrapper' >
							<div class='fl left'>
								<div class='btn'><img src='../img/getFlase.png'/></div>
							</div>
							<div class='fl right'>

								<div class='img fl'><a href='prodel.html'><img src='../img/photoimg2.png'/></a></div>
								<div class='fl con'>
									<a href='prodel.html'>
										<div class='title'>产品标题产品标题产品标题产品标题产品标题产品标题</div>
										<div class='txt'>某某:瘦瘦高高</div>
									</a>
									<div class='f'>
										<div class='money fl'>￥<a>77.99</a></div>
										<div class='count fr'>
											<div class='fl jian'>-</div>
											<div class='fl input'><input type='text' value='2' onkeyup="if(/\D/.test(this.value)){this.value='1';}"/></div>
											<div class='add fl'>+</div>
											<div class='clear'></div>
										</div>
										<div class='clear'></div>
									</div>
								</div>
								<div>
									
								</div>
								<div class='clear'></div>
							</div>
							<div class='clear'></div>
						</div>
						<div class="line-btn-delete"><button>删&nbsp;除</button></div>
						<div class='clear'></div>
					</div>
				</li>
				<li class='line-wrapper'>
					<div class="line-scroll-wrapper">
						<div class='fl line-normal-wrapper' >
							<div class='fl left'>
								<div class='btn'><img src='../img/getFlase.png'/></div>
							</div>
							<div class='fl right'>

								<div class='img fl'><a href='prodel.html'><img src='../img/photoimg2.png'/></a></div>
								<div class='fl con'>
									<a href='prodel.html'>
										<div class='title'>产品标题产品标题产品标题产品标题产品标题产品标题</div>
										<div class='txt'>某某:瘦瘦高高</div>
									</a>
									<div class='f'>
										<div class='money fl'>￥<a>77.99</a></div>
										<div class='count fr'>
											<div class='fl jian'>-</div>
											<div class='fl input'><input type='text' value='2' onkeyup="if(/\D/.test(this.value)){this.value='1';}"/></div>
											<div class='add fl'>+</div>
											<div class='clear'></div>
										</div>
										<div class='clear'></div>
									</div>
								</div>
								<div>
									
								</div>
								<div class='clear'></div>
							</div>
							<div class='clear'></div>
						</div>
						<div class="line-btn-delete"><button>删&nbsp;除</button></div>
						<div class='clear'></div>
					</div>
				</li>
				<li class='line-wrapper'>
					<div class="line-scroll-wrapper">
						<div class='fl line-normal-wrapper' >
							<div class='fl left'>
								<div class='btn'><img src='../img/getFlase.png'/></div>
							</div>
							<div class='fl right'>

								<div class='img fl'><a href='prodel.html'><img src='../img/photoimg2.png'/></a></div>
								<div class='fl con'>
									<a href='prodel.html'>
										<div class='title'>产品标题产品标题产品标题产品标题产品标题产品标题</div>
										<div class='txt'>某某:瘦瘦高高</div>
									</a>
									<div class='f'>
										<div class='money fl'>￥<a>77.99</a></div>
										<div class='count fr'>
											<div class='fl jian'>-</div>
											<div class='fl input'><input type='text' value='2' onkeyup="if(/\D/.test(this.value)){this.value='1';}"/></div>
											<div class='add fl'>+</div>
											<div class='clear'></div>
										</div>
										<div class='clear'></div>
									</div>
								</div>
								<div>
									
								</div>
								<div class='clear'></div>
							</div>
							<div class='clear'></div>
						</div>
						<div class="line-btn-delete"><button>删&nbsp;除</button></div>
						<div class='clear'></div>
					</div>
				</li>
				<li class='line-wrapper'>
					<div class="line-scroll-wrapper">
						<div class='fl line-normal-wrapper' >
							<div class='fl left'>
								<div class='btn'><img src='../img/getFlase.png'/></div>
							</div>
							<div class='fl right'>

								<div class='img fl'><a href='prodel.html'><img src='../img/photoimg2.png'/></a></div>
								<div class='fl con'>
									<a href='prodel.html'>
										<div class='title'>产品标题产品标题产品标题产品标题产品标题产品标题</div>
										<div class='txt'>某某:瘦瘦高高</div>
									</a>
									<div class='f'>
										<div class='money fl'>￥<a>77.99</a></div>
										<div class='count fr'>
											<div class='fl jian'>-</div>
											<div class='fl input'><input type='text' value='2' onkeyup="if(/\D/.test(this.value)){this.value='1';}"/></div>
											<div class='add fl'>+</div>
											<div class='clear'></div>
										</div>
										<div class='clear'></div>
									</div>
								</div>
								<div>
									
								</div>
								<div class='clear'></div>
							</div>
							<div class='clear'></div>
						</div>
						<div class="line-btn-delete"><button>删&nbsp;除</button></div>
						<div class='clear'></div>
					</div>
				</li>
				<li class='line-wrapper'>
					<div class="line-scroll-wrapper">
						<div class='fl line-normal-wrapper' >
							<div class='fl left'>
								<div class='btn'><img src='../img/getFlase.png'/></div>
							</div>
							<div class='fl right'>

								<div class='img fl'><a href='prodel.html'><img src='../img/photoimg2.png'/></a></div>
								<div class='fl con'>
									<a href='prodel.html'>
										<div class='title'>产品标题产品标题产品标题产品标题产品标题产品标题</div>
										<div class='txt'>某某:瘦瘦高高</div>
									</a>
									<div class='f'>
										<div class='money fl'>￥<a>77.99</a></div>
										<div class='count fr'>
											<div class='fl jian'>-</div>
											<div class='fl input'><input type='text' value='2' onkeyup="if(/\D/.test(this.value)){this.value='1';}"/></div>
											<div class='add fl'>+</div>
											<div class='clear'></div>
										</div>
										<div class='clear'></div>
									</div>
								</div>
								<div>
									
								</div>
								<div class='clear'></div>
							</div>
							<div class='clear'></div>
						</div>
						<div class="line-btn-delete"><button>删&nbsp;除</button></div>
						<div class='clear'></div>
					</div>
				</li>
			</ul>
			<div class='kong'></div>
			<div class='footer'>
				<div class='fl left'>
					<div class='fl img'><img src='../img/getFlase.png'/>全选</div>
					<div class='fr'>合计：<span>￥<a>199.00</a></span></div>
					<div class="clear"></div>
				</div>
				<div class='fr gos'><a href="confirmorder.html">去结算</a></div>
				<div class="clear"></div>
			</div>
			<div class='newsbg'>
				<div class='news'>
					<div class='img'><img src='../img/gantan.png'/></div>
					<div class='txt'>您确定要删除宝贝吗</div>
					<div class='fas'>取&nbsp;消</div>
					<div class='ges'>确&nbsp;定</div>
				</div>	
			</div>
		</section>
	</body>
	<script type="text/javascript">
	$(function(){
		$(".count .jian").click(function(){
			var val = parseInt($(this).next(".input").find('input').val());
	    	val = val-1;
			$(this).next(".input").find('input').val(val);
	    	if(val <= 0 ){
	    		$(this).next(".input").find('input').val(1);
	    	}
	    })
	    $(".count .add").click(function(){
			
	    	var val = parseInt($(this).prev(".input").find('input').val());
	    	val = val+1;
			$(this).prev(".input").find('input').val(val);
	    })

	    $(".shopbuslist li").find('.btn').click(function(){
	    	if($(this).hasClass('on')){
	    		$(this).removeClass("on");
	    		$(this).find("img").attr('src','../img/getFlase.png')
	    	}else{
	    		$(this).addClass("on");
	    		$(this).find("img").attr('src','../img/getTrue.png')
	    	}
	    });

	    $(".footer .img").click(function(){
	    	if($(this).hasClass('on')){
	    		$(this).removeClass("on");
	    		$(this).find("img").attr('src','../img/getFlase.png');
	    		for(var i = 0 ;i<$(".shopbuslist li").find('.btn').length;i++){
	    			$(".shopbuslist li").find('.btn').removeClass("on");
	    			$(".shopbuslist li").find('.btn').find("img").attr('src','../img/getFlase.png')
	    		}
	    	}else{
	    		$(this).addClass("on");
	    		$(this).find("img").attr('src','../img/getTrue.png');
	    		for(var i = 0 ;i<$(".shopbuslist li").find('.btn').length;i++){
	    			$(".shopbuslist li").find('.btn').addClass("on");
	    			$(".shopbuslist li").find('.btn').find("img").attr('src','../img/getTrue.png')
	    		}
	    	}
	    })

	    $('.list').dropload({
	        scrollArea : window,
	        loadDownFn : function(me){
	            $.ajax({
	                type: 'GET',
	                url: 'json/more.json',
	                dataType: 'json',
	                success: function(data){
	                    var result = '';
	                    for(var i = 0; i < data.lists.length; i++){
	                        result +=   'hello';
	                    }
	                    // 为了测试，延迟1秒加载
	                    setTimeout(function(){
	                        $('#lmess').append(result);
	                        me.resetload();
	                    },1000);
	                },
	                error: function(xhr, type){
	                    alert('Ajax error!');
	                    me.resetload();
	                }
	            });
	        }
	    });


	// 设定每一行的宽度=屏幕宽度+按钮宽度
    $(".line-scroll-wrapper").width($(".line-wrapper").width() + $(".line-btn-delete").width());
    // 设定常规信息区域宽度=屏幕宽度
    $(".line-normal-wrapper").width($(".line-wrapper").width());
    // 设定文字部分宽度（为了实现文字过长时在末尾显示...）
    //$(".line-normal-msg").width($(".line-normal-wrapper").width() - 280);
    //$(".line-btn-delete").height($(".line-wrapper").height());
    // 获取所有行，对每一行设置监听
    var lines = $(".list li");
    var len = lines.length; 
    var lastX, lastXForMobile;

    // 用于记录被按下的对象
    var pressedObj;  // 当前左滑的对象
    var lastLeftObj; // 上一个左滑的对象

    // 用于记录按下的点
    var start;

    // 网页在移动端运行时的监听
    for (var i = 0; i < len; ++i) {
        lines[i].addEventListener('touchstart', function(e){
            lastXForMobile = e.changedTouches[0].pageX;
            pressedObj = this; // 记录被按下的对象 

            // 记录开始按下时的点
            var touches = event.touches[0];
            start = { 
                x: touches.pageX, // 横坐标
                y: touches.pageY  // 纵坐标
            };
        });

        lines[i].addEventListener('touchmove',function(e){
            // 计算划动过程中x和y的变化量
            var touches = event.touches[0];
            delta = {
                x: touches.pageX - start.x,
                y: touches.pageY - start.y
            };

            // 横向位移大于纵向位移，阻止纵向滚动
            if (Math.abs(delta.x) > Math.abs(delta.y)) {
                event.preventDefault();
            }
        });

        lines[i].addEventListener('touchend', function(e){
            var diffX = e.changedTouches[0].pageX - lastXForMobile;
            if (diffX < -70) {
                $(pressedObj).animate({marginLeft:"-50px"}, 50); // 左滑
                lastLeftObj && lastLeftObj != pressedObj && $(lastLeftObj).animate({marginLeft:"0"}, 50); // 已经左滑状态的按钮右滑
                lastLeftObj = pressedObj; // 记录上一个左滑的对象
            } else if (diffX > 70) {
                $(pressedObj).animate({marginLeft:"0"}, 50); // 右滑
                lastLeftObj = null; // 清空上一个左滑的对象
            }
        });
        var nows;
        $(lines[i]).parent().find(".line-btn-delete").click(function(){
        	$(".newsbg").show();
        	$("html,body").css({'overflow':'hidden'});
        	nows = $(this);
        	
        })
        $(".newsbg").find('.fas').click(function(){
        	$(".newsbg").hide();
        	nows.parents(".line-wrapper").animate({marginLeft:"0"}, 50,function(){
        		$("html,body").css({'overflow-x':'hidden',"overflow-y":'auto'});
        	});

       	})
        $(".newsbg").find('.ges').click(function(){
        	$(".newsbg").hide();
        	nows.parents(".line-wrapper").slideUp(100,function(){
        		$("html,body").css({'overflow-x':'hidden',"overflow-y":'auto'});
        	});
        	
        })
        
    }

    // 网页在PC浏览器中运行时的监听
   
	})
	</script>
</html>